import { Injectable, Component, ChangeDetectorRef, NgZone, ApplicationRef, ComponentFactoryResolver, Injector, ReflectiveInjector, NgModule } from '@angular/core';
import { trigger, style, state, transition, animate } from '@angular/animations';
import { DomSanitizer } from '@angular/platform-browser';
import { Subject } from 'rxjs';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/platform-browser';
import * as ɵngcc2 from '@angular/common';

function ToastrComponent_div_2_div_1_Template(rf, ctx) { if (rf & 1) {
    const _r171 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 9);
    ɵngcc0.ɵɵlistener("click", function ToastrComponent_div_2_div_1_Template_div_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r171); const toastr_r164 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r169 = ɵngcc0.ɵɵnextContext(); return ctx_r169.removeToastr(toastr_r164); });
    ɵngcc0.ɵɵtext(1, "\u00D7 ");
    ɵngcc0.ɵɵelementEnd();
} }
function ToastrComponent_div_2_div_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const toastr_r164 = ɵngcc0.ɵɵnextContext().$implicit;
    const ctx_r166 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassMapInterpolate1("to-title ", toastr_r164.config.titleClass || ctx_r166.titleClass, "");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(toastr_r164.title);
} }
function ToastrComponent_div_2_span_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "span", 10);
} if (rf & 2) {
    const toastr_r164 = ɵngcc0.ɵɵnextContext().$implicit;
    const ctx_r167 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassMapInterpolate1("to-message ", toastr_r164.config.messageClass || ctx_r167.messageClass, "");
    ɵngcc0.ɵɵproperty("innerHTML", ctx_r167.sanitizer.bypassSecurityTrustHtml(toastr_r164.message), ɵngcc0.ɵɵsanitizeHtml);
} }
function ToastrComponent_div_2_span_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const toastr_r164 = ɵngcc0.ɵɵnextContext().$implicit;
    const ctx_r168 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassMapInterpolate1("to-message ", toastr_r164.config.messageClass || ctx_r168.messageClass, "");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(toastr_r164.message);
} }
function ToastrComponent_div_2_Template(rf, ctx) { if (rf & 1) {
    const _r176 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 3);
    ɵngcc0.ɵɵlistener("@inOut.done", function ToastrComponent_div_2_Template_div_animation_inOut_done_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r176); const ctx_r175 = ɵngcc0.ɵɵnextContext(); return ctx_r175.onAnimationEnd($event); })("click", function ToastrComponent_div_2_Template_div_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r176); const toastr_r164 = ctx.$implicit; const ctx_r177 = ɵngcc0.ɵɵnextContext(); return ctx_r177.clicked(toastr_r164); });
    ɵngcc0.ɵɵtemplate(1, ToastrComponent_div_2_div_1_Template, 2, 0, "div", 4);
    ɵngcc0.ɵɵtemplate(2, ToastrComponent_div_2_div_2_Template, 2, 4, "div", 5);
    ɵngcc0.ɵɵelementStart(3, "div", 6);
    ɵngcc0.ɵɵtemplate(4, ToastrComponent_div_2_span_4_Template, 1, 4, "span", 7);
    ɵngcc0.ɵɵtemplate(5, ToastrComponent_div_2_span_5_Template, 2, 4, "span", 8);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const toastr_r164 = ctx.$implicit;
    const ctx_r163 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassMapInterpolate1("toastr toastr-", toastr_r164.type, "");
    ɵngcc0.ɵɵproperty("@inOut", toastr_r164.config.animate || ctx_r163.animate);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", toastr_r164.config.showCloseButton);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", toastr_r164.title);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngSwitch", toastr_r164.config.enableHTML);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngSwitchCase", true);
} }
class ToastrOptions {
    constructor() {
        this.position = "top-right";
        this.maxShown = 5;
        this.newestOnTop = false;
        this.animate = "slideFromLeft";
        this.toastTimeout = 5000;
        this.enableHTML = false;
        this.dismiss = "auto";
        this.messageClass = "toastr-message";
        this.titleClass = "toastr-title";
        this.showCloseButton = false;
    }
}
ToastrOptions.ɵfac = function ToastrOptions_Factory(t) { return new (t || ToastrOptions)(); };
ToastrOptions.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: ToastrOptions, factory: ToastrOptions.ɵfac });
/** @nocollapse */
ToastrOptions.ctorParameters = () => [];
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ToastrOptions, [{
        type: Injectable
    }], function () { return []; }, null); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class Toastr {
    /**
     * @param {?} type
     * @param {?} message
     * @param {?=} title
     * @param {?=} data
     */
    constructor(type, message, title, data) {
        this.type = type;
        this.message = message;
        this.title = title;
        this.data = data;
        this.config = {
            position: '',
            animate: "slideFromLeft",
            dismiss: "auto",
            enableHTML: false,
            titleClass: "",
            messageClass: "",
            toastTimeout: 3000,
            showCloseButton: false
        };
    }
    /**
     * @return {?}
     */
    dismiss() {
        this.toastrManager.dismissToastr(this);
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
const /** @type {?} */ ToastrAnimations = trigger("inOut", [
    state("fade", style({ opacity: 1 })),
    transition("void => fade", [
        style({
            opacity: 1
        }),
        animate("0.4s ease-in")
    ]),
    transition("fade => void", [
        animate("0.4s 0.1s ease-out", style({
            opacity: 0
        }))
    ]),
    state("slideFromLeft", style({ opacity: 1, transform: "translateX(0)" })),
    transition("void => slideFromLeft", [
        style({
            opacity: 0,
            transform: "translateX(-100%)"
        }),
        animate("0.4s ease-in")
    ]),
    transition("slideFromLeft => void", [
        animate("0.4s 0.1s ease-out", style({
            opacity: 0,
            transform: "translateX(100%)"
        }))
    ]),
    state("slideFromRight", style({ opacity: 1, transform: "translateX(0)" })),
    transition("void => slideFromRight", [
        style({
            opacity: 0,
            transform: "translateX(100%)"
        }),
        animate("0.4s ease-in")
    ]),
    transition("slideFromRight => void", [
        animate("0.4s 0.1s ease-out", style({
            opacity: 0,
            transform: "translateX(-100%)"
        }))
    ]),
    state("slideFromTop", style({ opacity: 1, transform: "translateY(0)" })),
    transition("void => slideFromTop", [
        style({
            opacity: 0,
            transform: "translateY(-100%)"
        }),
        animate("0.4s ease-in")
    ]),
    transition("slideFromTop => void", [
        animate("0.4s 0.1s ease-out", style({
            opacity: 0,
            transform: "translateY(100%)"
        }))
    ]),
    state("slideFromBottom", style({ opacity: 1, transform: "translateY(0)" })),
    transition("void => slideFromBottom", [
        style({
            opacity: 0,
            transform: "translateY(100%)"
        }),
        animate("0.4s ease-in")
    ]),
    transition("slideFromBottom => void", [
        animate("0.4s 0.1s ease-out", style({
            opacity: 0,
            transform: "translateY(-100%)"
        }))
    ])
]);

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class ToastrComponent {
    /**
     * @param {?} sanitizer
     * @param {?} cdr
     * @param {?} _zone
     * @param {?} options
     */
    constructor(sanitizer, cdr, _zone, options) {
        this.sanitizer = sanitizer;
        this.cdr = cdr;
        this._zone = _zone;
        this.toastrs = [];
        this._fresh = true;
        this._onEnter = new Subject();
        this._onExit = new Subject();
        Object.assign(this, options);
    }
    /**
     * @return {?}
     */
    onEnter() {
        return this._onEnter.asObservable();
    }
    /**
     * @return {?}
     */
    onExit() {
        return this._onExit.asObservable();
    }
    /**
     * @param {?} toast
     * @return {?}
     */
    addToastr(toast) {
        if (this.position.indexOf("top") > 0) {
            if (this.newestOnTop) {
                this.toastrs.unshift(toast);
            }
            else {
                this.toastrs.push(toast);
            }
            if (this.toastrs.length > this.maxShown) {
                const /** @type {?} */ diff = this.toastrs.length - this.maxShown;
                if (this.newestOnTop) {
                    this.toastrs.splice(this.maxShown);
                }
                else {
                    this.toastrs.splice(0, diff);
                }
            }
        }
        else {
            this.toastrs.unshift(toast);
            if (this.toastrs.length > this.maxShown) {
                this.toastrs.splice(this.maxShown);
            }
        }
        if (this.animate === null && this._fresh) {
            this._fresh = false;
            this._onEnter.next();
            this._onEnter.complete();
        }
        this.cdr.detectChanges();
    }
    /**
     * @param {?} toast
     * @return {?}
     */
    removeToastr(toast) {
        if (toast.timeoutId) {
            clearTimeout(toast.timeoutId);
            toast.timeoutId = null;
        }
        this.toastrs = this.toastrs.filter(t => {
            return t.id !== toast.id;
        });
    }
    /**
     * @return {?}
     */
    removeAllToasts() {
        this.toastrs.forEach((toast) => {
            clearTimeout(toast.timeoutId);
            toast.timeoutId = null;
        });
        this.toastrs = [];
    }
    /**
     * @param {?} toast
     * @return {?}
     */
    clicked(toast) {
        if (this.onToastClicked) {
            this.onToastClicked(toast);
        }
    }
    /**
     * @return {?}
     */
    anyToast() {
        return this.toastrs.length > 0;
    }
    /**
     * @param {?} toastId
     * @return {?}
     */
    findToast(toastId) {
        for (let /** @type {?} */ toast of this.toastrs) {
            if (toast.id === toastId) {
                return toast;
            }
        }
        return null;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onAnimationEnd(event) {
        if (event.toState === "void" && !this.anyToast()) {
            this._ngExit();
        }
        else if (this._fresh && event.fromState === "void") {
            // notify when first animation is done
            this._fresh = false;
            this._zone.run(() => {
                this._onEnter.next();
                this._onEnter.complete();
            });
        }
    }
    /**
     * @return {?}
     */
    _ngExit() {
        this._zone.onMicrotaskEmpty.subscribe(() => {
            this._onExit.next();
            this._onExit.complete();
        });
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this._ngExit();
    }
}
ToastrComponent.ɵfac = function ToastrComponent_Factory(t) { return new (t || ToastrComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.DomSanitizer), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ToastrOptions)); };
ToastrComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ToastrComponent, selectors: [["app-toastr"]], decls: 3, vars: 4, consts: [["id", "toastr-container"], ["toastrContainer", ""], [3, "class", "click", 4, "ngFor", "ngForOf"], [3, "click"], ["class", "toastr-close-button", 3, "click", 4, "ngIf"], [3, "class", 4, "ngIf"], [3, "ngSwitch"], [3, "class", "innerHTML", 4, "ngSwitchCase"], [3, "class", 4, "ngSwitchDefault"], [1, "toastr-close-button", 3, "click"], [3, "innerHTML"]], template: function ToastrComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0, 1);
        ɵngcc0.ɵɵtemplate(2, ToastrComponent_div_2_Template, 6, 8, "div", 2);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵclassMap(ctx.position);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.toastrs);
    } }, directives: [ɵngcc2.NgForOf, ɵngcc2.NgIf, ɵngcc2.NgSwitch, ɵngcc2.NgSwitchCase, ɵngcc2.NgSwitchDefault], styles: [".to-title[_ngcontent-%COMP%]{font-weight:700;font-size:16px;margin-bottom:8px;color:#fff}.to-message[_ngcontent-%COMP%]{word-wrap:break-word;font-size:14px;line-height:20px;display:block;color:#fff;background-color:transparent}.to-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .to-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff}.to-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ccc;text-decoration:none}.toastr-close-button[_ngcontent-%COMP%]{position:relative;right:-5px;top:-15px;float:right;font-size:25px;color:#fff;-webkit-text-shadow:0 1px 0 #fff;text-shadow:0 1px 0 #fff;opacity:.8}.toastr-close-button[_ngcontent-%COMP%]:focus, .toastr-close-button[_ngcontent-%COMP%]:hover{color:#000;text-decoration:none;cursor:pointer;opacity:.4}button.toastr-close-button[_ngcontent-%COMP%]{padding:0;cursor:pointer;background:0 0;border:0;-webkit-appearance:none}.top-center[_ngcontent-%COMP%]{top:0;right:0;width:100%}.bottom-center[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.top-full-width[_ngcontent-%COMP%]{top:0;right:0;width:100%}.bottom-full-width[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.top-left[_ngcontent-%COMP%]{top:12px;left:12px}.top-right[_ngcontent-%COMP%]{top:12px;right:12px}.bottom-right[_ngcontent-%COMP%]{right:12px;bottom:12px}.bottom-left[_ngcontent-%COMP%]{bottom:12px;left:12px}#toastr-container[_ngcontent-%COMP%]{position:fixed;z-index:99999}#toastr-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:10px 0 6px;padding:15px 15px 15px 60px;width:345px;border-radius:3px;background-position:15px;background-repeat:no-repeat;box-shadow:0 0 12px #999;color:#fff;opacity:1}#toastr-container[_ngcontent-%COMP%] > div.toastr-custom[_ngcontent-%COMP%]{padding:15px;color:#030303}#toastr-container[_ngcontent-%COMP%] > div.toastr-custom[_ngcontent-%COMP%]   .toastr-close-button[_ngcontent-%COMP%]{color:#999!important}#toastr-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #000;opacity:1;cursor:pointer}#toastr-container[_ngcontent-%COMP%] > .toastr-info[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGwSURBVEhLtZa9SgNBEMc9sUxxRcoUKSzSWIhXpFMhhYWFhaBg4yPYiWCXZxBLERsLRS3EQkEfwCKdjWJAwSKCgoKCcudv4O5YLrt7EzgXhiU3/4+b2ckmwVjJSpKkQ6wAi4gwhT+z3wRBcEz0yjSseUTrcRyfsHsXmD0AmbHOC9Ii8VImnuXBPglHpQ5wwSVM7sNnTG7Za4JwDdCjxyAiH3nyA2mtaTJufiDZ5dCaqlItILh1NHatfN5skvjx9Z38m69CgzuXmZgVrPIGE763Jx9qKsRozWYw6xOHdER+nn2KkO+Bb+UV5CBN6WC6QtBgbRVozrahAbmm6HtUsgtPC19tFdxXZYBOfkbmFJ1VaHA1VAHjd0pp70oTZzvR+EVrx2Ygfdsq6eu55BHYR8hlcki+n+kERUFG8BrA0BwjeAv2M8WLQBtcy+SD6fNsmnB3AlBLrgTtVW1c2QN4bVWLATaIS60J2Du5y1TiJgjSBvFVZgTmwCU+dAZFoPxGEEs8nyHC9Bwe2GvEJv2WXZb0vjdyFT4Cxk3e/kIqlOGoVLwwPevpYHT+00T+hWwXDf4AJAOUqWcDhbwAAAAASUVORK5CYII=)!important}#toastr-container[_ngcontent-%COMP%] > .toastr-error[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHOSURBVEhLrZa/SgNBEMZzh0WKCClSCKaIYOED+AAKeQQLG8HWztLCImBrYadgIdY+gIKNYkBFSwu7CAoqCgkkoGBI/E28PdbLZmeDLgzZzcx83/zZ2SSXC1j9fr+I1Hq93g2yxH4iwM1vkoBWAdxCmpzTxfkN2RcyZNaHFIkSo10+8kgxkXIURV5HGxTmFuc75B2RfQkpxHG8aAgaAFa0tAHqYFfQ7Iwe2yhODk8+J4C7yAoRTWI3w/4klGRgR4lO7Rpn9+gvMyWp+uxFh8+H+ARlgN1nJuJuQAYvNkEnwGFck18Er4q3egEc/oO+mhLdKgRyhdNFiacC0rlOCbhNVz4H9FnAYgDBvU3QIioZlJFLJtsoHYRDfiZoUyIxqCtRpVlANq0EU4dApjrtgezPFad5S19Wgjkc0hNVnuF4HjVA6C7QrSIbylB+oZe3aHgBsqlNqKYH48jXyJKMuAbiyVJ8KzaB3eRc0pg9VwQ4niFryI68qiOi3AbjwdsfnAtk0bCjTLJKr6mrD9g8iq/S/B81hguOMlQTnVyG40wAcjnmgsCNESDrjme7wfftP4P7SP4N3CJZdvzoNyGq2c/HWOXJGsvVg+RA/k2MC/wN6I2YA2Pt8GkAAAAASUVORK5CYII=)!important}#toastr-container[_ngcontent-%COMP%] > .toastr-success[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADsSURBVEhLY2AYBfQMgf///3P8+/evAIgvA/FsIF+BavYDDWMBGroaSMMBiE8VC7AZDrIFaMFnii3AZTjUgsUUWUDA8OdAH6iQbQEhw4HyGsPEcKBXBIC4ARhex4G4BsjmweU1soIFaGg/WtoFZRIZdEvIMhxkCCjXIVsATV6gFGACs4Rsw0EGgIIH3QJYJgHSARQZDrWAB+jawzgs+Q2UO49D7jnRSRGoEFRILcdmEMWGI0cm0JJ2QpYA1RDvcmzJEWhABhD/pqrL0S0CWuABKgnRki9lLseS7g2AlqwHWQSKH4oKLrILpRGhEQCw2LiRUIa4lwAAAABJRU5ErkJggg==)!important}#toastr-container[_ngcontent-%COMP%] > .toastr-warning[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGYSURBVEhL5ZSvTsNQFMbXZGICMYGYmJhAQIJAICYQPAACiSDB8AiICQQJT4CqQEwgJvYASAQCiZiYmJhAIBATCARJy+9rTsldd8sKu1M0+dLb057v6/lbq/2rK0mS/TRNj9cWNAKPYIJII7gIxCcQ51cvqID+GIEX8ASG4B1bK5gIZFeQfoJdEXOfgX4QAQg7kH2A65yQ87lyxb27sggkAzAuFhbbg1K2kgCkB1bVwyIR9m2L7PRPIhDUIXgGtyKw575yz3lTNs6X4JXnjV+LKM/m3MydnTbtOKIjtz6VhCBq4vSm3ncdrD2lk0VgUXSVKjVDJXJzijW1RQdsU7F77He8u68koNZTz8Oz5yGa6J3H3lZ0xYgXBK2QymlWWA+RWnYhskLBv2vmE+hBMCtbA7KX5drWyRT/2JsqZ2IvfB9Y4bWDNMFbJRFmC9E74SoS0CqulwjkC0+5bpcV1CZ8NMej4pjy0U+doDQsGyo1hzVJttIjhQ7GnBtRFN1UarUlH8F3xict+HY07rEzoUGPlWcjRFRr4/gChZgc3ZL2d8oAAAAASUVORK5CYII=)!important}#toastr-container.bottom-center[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], #toastr-container.top-center[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:300px;margin:10px auto}#toastr-container.bottom-full-width[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], #toastr-container.top-full-width[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:96%;margin:10px auto}.toastr[_ngcontent-%COMP%]{background-color:#fff}.toastr-success[_ngcontent-%COMP%]{background-color:#51a351}.toastr-error[_ngcontent-%COMP%]{background-color:#d9534f}.toastr-info[_ngcontent-%COMP%]{background-color:#7460ee}.toastr-warning[_ngcontent-%COMP%]{background-color:#f89406}.toastr-progress[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;height:4px;background-color:#000;opacity:.4}@media all and (max-width:240px){#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:11em}#toastr-container[_ngcontent-%COMP%]   .toastr-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width:241px) and (max-width:480px){#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:18em}#toastr-container[_ngcontent-%COMP%]   .toastr-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width:481px) and (max-width:768px){#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:15px 15px 15px 50px;width:25em}}"], data: { animation: [ToastrAnimations] } });
/** @nocollapse */
ToastrComponent.ctorParameters = () => [
    { type: DomSanitizer },
    { type: ChangeDetectorRef },
    { type: NgZone },
    { type: ToastrOptions }
];
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ToastrComponent, [{
        type: Component,
        args: [{
                selector: "app-toastr",
                template: `<div #toastrContainer id="toastr-container" class="{{position}}">
  <div *ngFor="let toastr of toastrs" [@inOut]="toastr.config.animate || animate" (@inOut.done)="onAnimationEnd($event)" class="toastr toastr-{{toastr.type}}" 
  (click)="clicked(toastr)">
    <div class="toastr-close-button" *ngIf="toastr.config.showCloseButton" (click)="removeToastr(toastr)">&times;
    </div> 
    <div *ngIf="toastr.title" class="to-title {{toastr.config.titleClass || titleClass}}">{{toastr.title}}</div>
    <div [ngSwitch]="toastr.config.enableHTML">
      <span *ngSwitchCase="true" class="to-message {{toastr.config.messageClass || messageClass}}" [innerHTML]="sanitizer.bypassSecurityTrustHtml(toastr.message)"></span>
      <span *ngSwitchDefault class="to-message {{toastr.config.messageClass || messageClass}}">{{toastr.message}}</span>
    </div>             
  </div>
</div>`,
                styles: [`.to-title{font-weight:700;font-size:16px;margin-bottom:8px;color:#fff}.to-message{word-wrap:break-word;font-size:14px;line-height:20px;display:block;color:#fff;background-color:transparent}.to-message a,.to-message label{color:#fff}.to-message a:hover{color:#ccc;text-decoration:none}.toastr-close-button{position:relative;right:-5px;top:-15px;float:right;font-size:25px;color:#fff;-webkit-text-shadow:0 1px 0 #fff;text-shadow:0 1px 0 #fff;opacity:.8}.toastr-close-button:focus,.toastr-close-button:hover{color:#000;text-decoration:none;cursor:pointer;opacity:.4}button.toastr-close-button{padding:0;cursor:pointer;background:0 0;border:0;-webkit-appearance:none}.top-center{top:0;right:0;width:100%}.bottom-center{bottom:0;right:0;width:100%}.top-full-width{top:0;right:0;width:100%}.bottom-full-width{bottom:0;right:0;width:100%}.top-left{top:12px;left:12px}.top-right{top:12px;right:12px}.bottom-right{right:12px;bottom:12px}.bottom-left{bottom:12px;left:12px}#toastr-container{position:fixed;z-index:99999}#toastr-container *{box-sizing:border-box}#toastr-container>div{position:relative;overflow:hidden;margin:10px 0 6px;padding:15px 15px 15px 60px;width:345px;border-radius:3px;background-position:15px;background-repeat:no-repeat;box-shadow:0 0 12px #999;color:#fff;opacity:1}#toastr-container>div.toastr-custom{padding:15px;color:#030303}#toastr-container>div.toastr-custom .toastr-close-button{color:#999!important}#toastr-container>:hover{box-shadow:0 0 12px #000;opacity:1;cursor:pointer}#toastr-container>.toastr-info{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGwSURBVEhLtZa9SgNBEMc9sUxxRcoUKSzSWIhXpFMhhYWFhaBg4yPYiWCXZxBLERsLRS3EQkEfwCKdjWJAwSKCgoKCcudv4O5YLrt7EzgXhiU3/4+b2ckmwVjJSpKkQ6wAi4gwhT+z3wRBcEz0yjSseUTrcRyfsHsXmD0AmbHOC9Ii8VImnuXBPglHpQ5wwSVM7sNnTG7Za4JwDdCjxyAiH3nyA2mtaTJufiDZ5dCaqlItILh1NHatfN5skvjx9Z38m69CgzuXmZgVrPIGE763Jx9qKsRozWYw6xOHdER+nn2KkO+Bb+UV5CBN6WC6QtBgbRVozrahAbmm6HtUsgtPC19tFdxXZYBOfkbmFJ1VaHA1VAHjd0pp70oTZzvR+EVrx2Ygfdsq6eu55BHYR8hlcki+n+kERUFG8BrA0BwjeAv2M8WLQBtcy+SD6fNsmnB3AlBLrgTtVW1c2QN4bVWLATaIS60J2Du5y1TiJgjSBvFVZgTmwCU+dAZFoPxGEEs8nyHC9Bwe2GvEJv2WXZb0vjdyFT4Cxk3e/kIqlOGoVLwwPevpYHT+00T+hWwXDf4AJAOUqWcDhbwAAAAASUVORK5CYII=)!important}#toastr-container>.toastr-error{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHOSURBVEhLrZa/SgNBEMZzh0WKCClSCKaIYOED+AAKeQQLG8HWztLCImBrYadgIdY+gIKNYkBFSwu7CAoqCgkkoGBI/E28PdbLZmeDLgzZzcx83/zZ2SSXC1j9fr+I1Hq93g2yxH4iwM1vkoBWAdxCmpzTxfkN2RcyZNaHFIkSo10+8kgxkXIURV5HGxTmFuc75B2RfQkpxHG8aAgaAFa0tAHqYFfQ7Iwe2yhODk8+J4C7yAoRTWI3w/4klGRgR4lO7Rpn9+gvMyWp+uxFh8+H+ARlgN1nJuJuQAYvNkEnwGFck18Er4q3egEc/oO+mhLdKgRyhdNFiacC0rlOCbhNVz4H9FnAYgDBvU3QIioZlJFLJtsoHYRDfiZoUyIxqCtRpVlANq0EU4dApjrtgezPFad5S19Wgjkc0hNVnuF4HjVA6C7QrSIbylB+oZe3aHgBsqlNqKYH48jXyJKMuAbiyVJ8KzaB3eRc0pg9VwQ4niFryI68qiOi3AbjwdsfnAtk0bCjTLJKr6mrD9g8iq/S/B81hguOMlQTnVyG40wAcjnmgsCNESDrjme7wfftP4P7SP4N3CJZdvzoNyGq2c/HWOXJGsvVg+RA/k2MC/wN6I2YA2Pt8GkAAAAASUVORK5CYII=)!important}#toastr-container>.toastr-success{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADsSURBVEhLY2AYBfQMgf///3P8+/evAIgvA/FsIF+BavYDDWMBGroaSMMBiE8VC7AZDrIFaMFnii3AZTjUgsUUWUDA8OdAH6iQbQEhw4HyGsPEcKBXBIC4ARhex4G4BsjmweU1soIFaGg/WtoFZRIZdEvIMhxkCCjXIVsATV6gFGACs4Rsw0EGgIIH3QJYJgHSARQZDrWAB+jawzgs+Q2UO49D7jnRSRGoEFRILcdmEMWGI0cm0JJ2QpYA1RDvcmzJEWhABhD/pqrL0S0CWuABKgnRki9lLseS7g2AlqwHWQSKH4oKLrILpRGhEQCw2LiRUIa4lwAAAABJRU5ErkJggg==)!important}#toastr-container>.toastr-warning{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGYSURBVEhL5ZSvTsNQFMbXZGICMYGYmJhAQIJAICYQPAACiSDB8AiICQQJT4CqQEwgJvYASAQCiZiYmJhAIBATCARJy+9rTsldd8sKu1M0+dLb057v6/lbq/2rK0mS/TRNj9cWNAKPYIJII7gIxCcQ51cvqID+GIEX8ASG4B1bK5gIZFeQfoJdEXOfgX4QAQg7kH2A65yQ87lyxb27sggkAzAuFhbbg1K2kgCkB1bVwyIR9m2L7PRPIhDUIXgGtyKw575yz3lTNs6X4JXnjV+LKM/m3MydnTbtOKIjtz6VhCBq4vSm3ncdrD2lk0VgUXSVKjVDJXJzijW1RQdsU7F77He8u68koNZTz8Oz5yGa6J3H3lZ0xYgXBK2QymlWWA+RWnYhskLBv2vmE+hBMCtbA7KX5drWyRT/2JsqZ2IvfB9Y4bWDNMFbJRFmC9E74SoS0CqulwjkC0+5bpcV1CZ8NMej4pjy0U+doDQsGyo1hzVJttIjhQ7GnBtRFN1UarUlH8F3xict+HY07rEzoUGPlWcjRFRr4/gChZgc3ZL2d8oAAAAASUVORK5CYII=)!important}#toastr-container.bottom-center>div,#toastr-container.top-center>div{width:300px;margin:10px auto}#toastr-container.bottom-full-width>div,#toastr-container.top-full-width>div{width:96%;margin:10px auto}.toastr{background-color:#fff}.toastr-success{background-color:#51a351}.toastr-error{background-color:#d9534f}.toastr-info{background-color:#7460ee}.toastr-warning{background-color:#f89406}.toastr-progress{position:absolute;left:0;bottom:0;height:4px;background-color:#000;opacity:.4}@media all and (max-width:240px){#toastr-container>div{padding:8px 8px 8px 50px;width:11em}#toastr-container .toastr-close-button{right:-.2em;top:-.2em}}@media all and (min-width:241px) and (max-width:480px){#toastr-container>div{padding:8px 8px 8px 50px;width:18em}#toastr-container .toastr-close-button{right:-.2em;top:-.2em}}@media all and (min-width:481px) and (max-width:768px){#toastr-container>div{padding:15px 15px 15px 50px;width:25em}}`],
                animations: [ToastrAnimations]
            }]
    }], function () { return [{ type: ɵngcc1.DomSanitizer }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc0.NgZone }, { type: ToastrOptions }]; }, null); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class ToastrManager {
    /**
     * @param {?} _applicationRef
     * @param {?} _componentFactoryResolver
     * @param {?} _injector
     * @param {?} ngZone
     * @param {?} options
     */
    constructor(_applicationRef, _componentFactoryResolver, _injector, ngZone, options) {
        this._applicationRef = _applicationRef;
        this._componentFactoryResolver = _componentFactoryResolver;
        this._injector = _injector;
        this.ngZone = ngZone;
        this.options = options;
        this.toastrContainers = [];
        this.index = 0;
        this.toastClicked = new Subject();
    }
    /**
     * @template T
     * @param {?} type
     * @param {?=} providers
     * @return {?}
     */
    createToastrComponent(type, providers = []) {
        // Resolve a factory for creating components of type `type`.
        const /** @type {?} */ factory = this._componentFactoryResolver.resolveComponentFactory(/** @type {?} */ (type));
        // Resolve and create an injector with the specified providers.
        const /** @type {?} */ _providers = ReflectiveInjector.resolve(providers);
        const /** @type {?} */ injector = ReflectiveInjector.fromResolvedProviders(_providers, this._injector);
        // Create new node for inserting into document.
        let /** @type {?} */ newNode = document.createElement("div");
        newNode.id = "toastr-node-" + Math.floor(Math.random() * 200);
        document.querySelector("body").appendChild(newNode);
        // Create a component using the previously resolved factory & injector.
        const /** @type {?} */ componentRef = factory.create(injector, [], newNode);
        // Insert new component node into document body.
        this.attachToApplication(componentRef);
        return componentRef;
    }
    /**
     * @template T
     * @param {?} componentRef
     * @return {?}
     */
    attachToApplication(componentRef) {
        this._applicationRef.attachView(componentRef.hostView);
    }
    /**
     * @template T
     * @param {?} componentRef
     * @return {?}
     */
    detachFromApplication(componentRef) {
        this._applicationRef.detachView(componentRef.hostView);
    }
    /**
     * @param {?} position
     * @return {?}
     */
    isToastrContainerExist(position) {
        if (this.toastrContainers.length > 0) {
            const /** @type {?} */ i = this.toastrContainers.findIndex(x => x.position === position);
            if (i > -1) {
                return true;
            }
        }
        return false;
    }
    /**
     * @param {?} position
     * @return {?}
     */
    getToastrComponentRef(position) {
        if (this.toastrContainers.length > 0) {
            const /** @type {?} */ container = this.toastrContainers.find(x => x.position === position);
            return container ? container.ref : null;
        }
        return null;
    }
    /**
     * @param {?} toast
     * @return {?}
     */
    createTimeout(toast) {
        let /** @type {?} */ task;
        this.ngZone.runOutsideAngular(() => {
            task = setTimeout(() => this.ngZone.run(() => this.clearToast(toast)), toast.config.toastTimeout);
        });
        return task.toString();
    }
    /**
     * @param {?} toast
     * @param {?=} options
     * @return {?}
     */
    setupToast(toast, options) {
        toast.id = ++this.index;
        if (options && options.hasOwnProperty("toastTimeout")) {
            options.dismiss = "auto";
        }
        const /** @type {?} */ customConfig = Object.assign({}, this.options, options || {});
        Object.keys(toast.config).forEach(k => {
            if (customConfig.hasOwnProperty(k)) {
                toast.config[k] = customConfig[k];
            }
        });
        if (toast.config.dismiss === "auto") {
            toast.timeoutId = this.createTimeout(toast);
        }
        toast.toastrManager = this; // bind ToastrManager instance to Toastr
        const /** @type {?} */ position = toast.config.position;
        if (this.isToastrContainerExist(position)) {
            this.getToastrComponentRef(position).instance.addToastr(toast);
        }
        return toast;
    }
    /**
     * @param {?} toast
     * @return {?}
     */
    clearToast(toast) {
        const /** @type {?} */ position = toast.config.position;
        if (this.isToastrContainerExist(position)) {
            let /** @type {?} */ instance = this.getToastrComponentRef(position).instance;
            instance.removeToastr(toast);
        }
    }
    /**
     * @return {?}
     */
    clearAllToasts() {
        if (this.toastrContainers.length > 0) {
            this.toastrContainers.forEach(component => {
                console.log(component);
                const /** @type {?} */ ref = component.ref;
                const /** @type {?} */ instance = component.ref.instance;
                instance.removeAllToasts();
                this.dispose(ref);
            });
        }
    }
    /**
     * @param {?} toastrComponentRef
     * @return {?}
     */
    dispose(toastrComponentRef) {
        if (toastrComponentRef) {
            const /** @type {?} */ i = this.toastrContainers.findIndex(x => x.position === toastrComponentRef.instance.position);
            if (i > -1) {
                this.toastrContainers.splice(i, 1);
            }
            this.detachFromApplication(toastrComponentRef);
        }
    }
    /**
     * @param {?} toast
     * @return {?}
     */
    _onToastClicked(toast) {
        this.toastClicked.next(toast);
        if (toast.config.dismiss !== "controlled") {
            this.clearToast(toast);
        }
    }
    /**
     * @param {?} toast
     * @return {?}
     */
    dismissToastr(toast) {
        this.clearToast(toast);
    }
    /**
     * @return {?}
     */
    dismissAllToastr() {
        this.clearAllToasts();
    }
    /**
     * @return {?}
     */
    onClickToast() {
        return this.toastClicked.asObservable();
    }
    /**
     * @param {?} toastr
     * @param {?=} options
     * @return {?}
     */
    showToastr(toastr, options) {
        const /** @type {?} */ opt = Object.assign({}, this.options, options);
        return new Promise((resolve, reject) => {
            if (!this.isToastrContainerExist(opt.position)) {
                const /** @type {?} */ providers = [{ provide: ToastrOptions, useValue: opt }];
                let /** @type {?} */ toastrComponentRef = this.createToastrComponent(ToastrComponent, providers);
                toastrComponentRef.instance.onToastClicked = (toast) => {
                    this._onToastClicked(toast);
                };
                toastrComponentRef.instance.onExit().subscribe(() => {
                    this.dispose(toastrComponentRef);
                });
                this.toastrContainers.push({
                    position: opt.position,
                    ref: toastrComponentRef
                });
            }
            resolve(this.setupToast(toastr, options));
        });
    }
    /**
     * @param {?} message
     * @param {?=} title
     * @param {?=} options
     * @return {?}
     */
    errorToastr(message, title, options) {
        const /** @type {?} */ data = options && options.data ? options.data : null;
        const /** @type {?} */ toast = new Toastr("error", message, title, data);
        this.showToastr(toast, options);
        return toast;
    }
    /**
     * @param {?} message
     * @param {?=} title
     * @param {?=} options
     * @return {?}
     */
    infoToastr(message, title, options) {
        const /** @type {?} */ data = options && options.data ? options.data : null;
        const /** @type {?} */ toast = new Toastr("info", message, title, data);
        this.showToastr(toast, options);
        return toast;
    }
    /**
     * @param {?} message
     * @param {?=} title
     * @param {?=} options
     * @return {?}
     */
    successToastr(message, title, options) {
        const /** @type {?} */ data = options && options.data ? options.data : null;
        const /** @type {?} */ toast = new Toastr("success", message, title, data);
        this.showToastr(toast, options);
        return toast;
    }
    /**
     * @param {?} message
     * @param {?=} title
     * @param {?=} options
     * @return {?}
     */
    warningToastr(message, title, options) {
        const /** @type {?} */ data = options && options.data ? options.data : null;
        const /** @type {?} */ toast = new Toastr("warning", message, title, data);
        this.showToastr(toast, options);
        return toast;
    }
    /**
     * @param {?} message
     * @param {?=} title
     * @param {?=} options
     * @return {?}
     */
    customToastr(message, title, options) {
        const /** @type {?} */ data = options && options.data ? options.data : null;
        const /** @type {?} */ toast = new Toastr("custom", message, title, data);
        this.showToastr(toast, options);
        return toast;
    }
}
ToastrManager.ɵfac = function ToastrManager_Factory(t) { return new (t || ToastrManager)(ɵngcc0.ɵɵinject(ɵngcc0.ApplicationRef), ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵinject(ɵngcc0.Injector), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(ToastrOptions)); };
ToastrManager.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: ToastrManager, factory: ToastrManager.ɵfac });
/** @nocollapse */
ToastrManager.ctorParameters = () => [
    { type: ApplicationRef },
    { type: ComponentFactoryResolver },
    { type: Injector },
    { type: NgZone },
    { type: ToastrOptions }
];
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ToastrManager, [{
        type: Injectable
    }], function () { return [{ type: ɵngcc0.ApplicationRef }, { type: ɵngcc0.ComponentFactoryResolver }, { type: ɵngcc0.Injector }, { type: ɵngcc0.NgZone }, { type: ToastrOptions }]; }, null); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class ToastrModule {
    /**
     * @return {?}
     */
    static forRoot() {
        return {
            ngModule: ToastrModule,
            providers: [ToastrManager, ToastrOptions]
        };
    }
}
ToastrModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: ToastrModule });
ToastrModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function ToastrModule_Factory(t) { return new (t || ToastrModule)(); }, imports: [[CommonModule]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ToastrModule, { declarations: function () { return [ToastrComponent]; }, imports: function () { return [CommonModule]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ToastrModule, [{
        type: NgModule,
        args: [{
                imports: [CommonModule],
                declarations: [ToastrComponent],
                entryComponents: [ToastrComponent]
            }]
    }], null, null); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { ToastrModule, ToastrManager, Toastr, ToastrAnimations as ɵb, ToastrComponent as ɵa, ToastrOptions as ɵc };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYWd1bHNyL01hbGxpa2FyanVuL2hyYW5ndWxhci9ub2RlX21vZHVsZXMvbmc2LXRvYXN0ci1ub3RpZmljYXRpb25zL2Zlc20yMDE1L25nNi10b2FzdHItbm90aWZpY2F0aW9ucy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVVBOzs7Ozs7Ozs7Ozs7Ozs7Q0FhQyxzR0FHQzs7Ozs7Z0RBRXNDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQXNRdkMsMnJOQW1CQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O21LQU9BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBbVJELHNHQUdDOzs7Ozs7Ozs7Ozt1TUFRQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBZ0JEOzs7Ozs7Ozs7MEJBT0MiLCJmaWxlIjoibmc2LXRvYXN0ci1ub3RpZmljYXRpb25zLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgQ29tcG9uZW50LCBDaGFuZ2VEZXRlY3RvclJlZiwgTmdab25lLCBBcHBsaWNhdGlvblJlZiwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBJbmplY3RvciwgUmVmbGVjdGl2ZUluamVjdG9yLCBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgdHJpZ2dlciwgc3R5bGUsIHN0YXRlLCB0cmFuc2l0aW9uLCBhbmltYXRlIH0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XG5pbXBvcnQgeyBEb21TYW5pdGl6ZXIgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcclxuICogQHN1cHByZXNzIHtjaGVja1R5cGVzfSBjaGVja2VkIGJ5IHRzY1xyXG4gKi9cclxuY2xhc3MgVG9hc3RyT3B0aW9ucyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gXCJ0b3AtcmlnaHRcIjtcclxuICAgICAgICB0aGlzLm1heFNob3duID0gNTtcclxuICAgICAgICB0aGlzLm5ld2VzdE9uVG9wID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hbmltYXRlID0gXCJzbGlkZUZyb21MZWZ0XCI7XHJcbiAgICAgICAgdGhpcy50b2FzdFRpbWVvdXQgPSA1MDAwO1xyXG4gICAgICAgIHRoaXMuZW5hYmxlSFRNTCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZGlzbWlzcyA9IFwiYXV0b1wiO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUNsYXNzID0gXCJ0b2FzdHItbWVzc2FnZVwiO1xyXG4gICAgICAgIHRoaXMudGl0bGVDbGFzcyA9IFwidG9hc3RyLXRpdGxlXCI7XHJcbiAgICAgICAgdGhpcy5zaG93Q2xvc2VCdXR0b24gPSBmYWxzZTtcclxuICAgIH1cclxufVxyXG5Ub2FzdHJPcHRpb25zLmRlY29yYXRvcnMgPSBbXHJcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfSxcclxuXTtcclxuLyoqIEBub2NvbGxhcHNlICovXHJcblRvYXN0ck9wdGlvbnMuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXTtcblxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgYWRkZWQgYnkgdHNpY2tsZVxyXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXN9IGNoZWNrZWQgYnkgdHNjXHJcbiAqL1xyXG5jbGFzcyBUb2FzdHIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IHR5cGVcclxuICAgICAqIEBwYXJhbSB7P30gbWVzc2FnZVxyXG4gICAgICogQHBhcmFtIHs/PX0gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7Pz19IGRhdGFcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IodHlwZSwgbWVzc2FnZSwgdGl0bGUsIGRhdGEpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnJyxcclxuICAgICAgICAgICAgYW5pbWF0ZTogXCJzbGlkZUZyb21MZWZ0XCIsXHJcbiAgICAgICAgICAgIGRpc21pc3M6IFwiYXV0b1wiLFxyXG4gICAgICAgICAgICBlbmFibGVIVE1MOiBmYWxzZSxcclxuICAgICAgICAgICAgdGl0bGVDbGFzczogXCJcIixcclxuICAgICAgICAgICAgbWVzc2FnZUNsYXNzOiBcIlwiLFxyXG4gICAgICAgICAgICB0b2FzdFRpbWVvdXQ6IDMwMDAsXHJcbiAgICAgICAgICAgIHNob3dDbG9zZUJ1dHRvbjogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBkaXNtaXNzKCkge1xyXG4gICAgICAgIHRoaXMudG9hc3RyTWFuYWdlci5kaXNtaXNzVG9hc3RyKHRoaXMpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcclxuICogQHN1cHByZXNzIHtjaGVja1R5cGVzfSBjaGVja2VkIGJ5IHRzY1xyXG4gKi9cclxuY29uc3QgLyoqIEB0eXBlIHs/fSAqLyBUb2FzdHJBbmltYXRpb25zID0gdHJpZ2dlcihcImluT3V0XCIsIFtcclxuICAgIHN0YXRlKFwiZmFkZVwiLCBzdHlsZSh7IG9wYWNpdHk6IDEgfSkpLFxyXG4gICAgdHJhbnNpdGlvbihcInZvaWQgPT4gZmFkZVwiLCBbXHJcbiAgICAgICAgc3R5bGUoe1xyXG4gICAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgYW5pbWF0ZShcIjAuNHMgZWFzZS1pblwiKVxyXG4gICAgXSksXHJcbiAgICB0cmFuc2l0aW9uKFwiZmFkZSA9PiB2b2lkXCIsIFtcclxuICAgICAgICBhbmltYXRlKFwiMC40cyAwLjFzIGVhc2Utb3V0XCIsIHN0eWxlKHtcclxuICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgIH0pKVxyXG4gICAgXSksXHJcbiAgICBzdGF0ZShcInNsaWRlRnJvbUxlZnRcIiwgc3R5bGUoeyBvcGFjaXR5OiAxLCB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWCgwKVwiIH0pKSxcclxuICAgIHRyYW5zaXRpb24oXCJ2b2lkID0+IHNsaWRlRnJvbUxlZnRcIiwgW1xyXG4gICAgICAgIHN0eWxlKHtcclxuICAgICAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICAgICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZVgoLTEwMCUpXCJcclxuICAgICAgICB9KSxcclxuICAgICAgICBhbmltYXRlKFwiMC40cyBlYXNlLWluXCIpXHJcbiAgICBdKSxcclxuICAgIHRyYW5zaXRpb24oXCJzbGlkZUZyb21MZWZ0ID0+IHZvaWRcIiwgW1xyXG4gICAgICAgIGFuaW1hdGUoXCIwLjRzIDAuMXMgZWFzZS1vdXRcIiwgc3R5bGUoe1xyXG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWCgxMDAlKVwiXHJcbiAgICAgICAgfSkpXHJcbiAgICBdKSxcclxuICAgIHN0YXRlKFwic2xpZGVGcm9tUmlnaHRcIiwgc3R5bGUoeyBvcGFjaXR5OiAxLCB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWCgwKVwiIH0pKSxcclxuICAgIHRyYW5zaXRpb24oXCJ2b2lkID0+IHNsaWRlRnJvbVJpZ2h0XCIsIFtcclxuICAgICAgICBzdHlsZSh7XHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGVYKDEwMCUpXCJcclxuICAgICAgICB9KSxcclxuICAgICAgICBhbmltYXRlKFwiMC40cyBlYXNlLWluXCIpXHJcbiAgICBdKSxcclxuICAgIHRyYW5zaXRpb24oXCJzbGlkZUZyb21SaWdodCA9PiB2b2lkXCIsIFtcclxuICAgICAgICBhbmltYXRlKFwiMC40cyAwLjFzIGVhc2Utb3V0XCIsIHN0eWxlKHtcclxuICAgICAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICAgICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZVgoLTEwMCUpXCJcclxuICAgICAgICB9KSlcclxuICAgIF0pLFxyXG4gICAgc3RhdGUoXCJzbGlkZUZyb21Ub3BcIiwgc3R5bGUoeyBvcGFjaXR5OiAxLCB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWSgwKVwiIH0pKSxcclxuICAgIHRyYW5zaXRpb24oXCJ2b2lkID0+IHNsaWRlRnJvbVRvcFwiLCBbXHJcbiAgICAgICAgc3R5bGUoe1xyXG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWSgtMTAwJSlcIlxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGFuaW1hdGUoXCIwLjRzIGVhc2UtaW5cIilcclxuICAgIF0pLFxyXG4gICAgdHJhbnNpdGlvbihcInNsaWRlRnJvbVRvcCA9PiB2b2lkXCIsIFtcclxuICAgICAgICBhbmltYXRlKFwiMC40cyAwLjFzIGVhc2Utb3V0XCIsIHN0eWxlKHtcclxuICAgICAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICAgICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZVkoMTAwJSlcIlxyXG4gICAgICAgIH0pKVxyXG4gICAgXSksXHJcbiAgICBzdGF0ZShcInNsaWRlRnJvbUJvdHRvbVwiLCBzdHlsZSh7IG9wYWNpdHk6IDEsIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGVZKDApXCIgfSkpLFxyXG4gICAgdHJhbnNpdGlvbihcInZvaWQgPT4gc2xpZGVGcm9tQm90dG9tXCIsIFtcclxuICAgICAgICBzdHlsZSh7XHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGVZKDEwMCUpXCJcclxuICAgICAgICB9KSxcclxuICAgICAgICBhbmltYXRlKFwiMC40cyBlYXNlLWluXCIpXHJcbiAgICBdKSxcclxuICAgIHRyYW5zaXRpb24oXCJzbGlkZUZyb21Cb3R0b20gPT4gdm9pZFwiLCBbXHJcbiAgICAgICAgYW5pbWF0ZShcIjAuNHMgMC4xcyBlYXNlLW91dFwiLCBzdHlsZSh7XHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGVZKC0xMDAlKVwiXHJcbiAgICAgICAgfSkpXHJcbiAgICBdKVxyXG5dKTtcblxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgYWRkZWQgYnkgdHNpY2tsZVxyXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXN9IGNoZWNrZWQgYnkgdHNjXHJcbiAqL1xyXG5jbGFzcyBUb2FzdHJDb21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IHNhbml0aXplclxyXG4gICAgICogQHBhcmFtIHs/fSBjZHJcclxuICAgICAqIEBwYXJhbSB7P30gX3pvbmVcclxuICAgICAqIEBwYXJhbSB7P30gb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihzYW5pdGl6ZXIsIGNkciwgX3pvbmUsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLnNhbml0aXplciA9IHNhbml0aXplcjtcclxuICAgICAgICB0aGlzLmNkciA9IGNkcjtcclxuICAgICAgICB0aGlzLl96b25lID0gX3pvbmU7XHJcbiAgICAgICAgdGhpcy50b2FzdHJzID0gW107XHJcbiAgICAgICAgdGhpcy5fZnJlc2ggPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX29uRW50ZXIgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgICAgIHRoaXMuX29uRXhpdCA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBvcHRpb25zKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgb25FbnRlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb25FbnRlci5hc09ic2VydmFibGUoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgb25FeGl0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vbkV4aXQuYXNPYnNlcnZhYmxlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gdG9hc3RcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGFkZFRvYXN0cih0b2FzdCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uLmluZGV4T2YoXCJ0b3BcIikgPiAwKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5ld2VzdE9uVG9wKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvYXN0cnMudW5zaGlmdCh0b2FzdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvYXN0cnMucHVzaCh0b2FzdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMudG9hc3Rycy5sZW5ndGggPiB0aGlzLm1heFNob3duKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCAvKiogQHR5cGUgez99ICovIGRpZmYgPSB0aGlzLnRvYXN0cnMubGVuZ3RoIC0gdGhpcy5tYXhTaG93bjtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5ld2VzdE9uVG9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2FzdHJzLnNwbGljZSh0aGlzLm1heFNob3duKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9hc3Rycy5zcGxpY2UoMCwgZGlmZik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9hc3Rycy51bnNoaWZ0KHRvYXN0KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMudG9hc3Rycy5sZW5ndGggPiB0aGlzLm1heFNob3duKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvYXN0cnMuc3BsaWNlKHRoaXMubWF4U2hvd24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmFuaW1hdGUgPT09IG51bGwgJiYgdGhpcy5fZnJlc2gpIHtcclxuICAgICAgICAgICAgdGhpcy5fZnJlc2ggPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fb25FbnRlci5uZXh0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX29uRW50ZXIuY29tcGxldGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IHRvYXN0XHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICByZW1vdmVUb2FzdHIodG9hc3QpIHtcclxuICAgICAgICBpZiAodG9hc3QudGltZW91dElkKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0b2FzdC50aW1lb3V0SWQpO1xyXG4gICAgICAgICAgICB0b2FzdC50aW1lb3V0SWQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRvYXN0cnMgPSB0aGlzLnRvYXN0cnMuZmlsdGVyKHQgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdC5pZCAhPT0gdG9hc3QuaWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIHJlbW92ZUFsbFRvYXN0cygpIHtcclxuICAgICAgICB0aGlzLnRvYXN0cnMuZm9yRWFjaCgodG9hc3QpID0+IHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRvYXN0LnRpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgIHRvYXN0LnRpbWVvdXRJZCA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50b2FzdHJzID0gW107XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gdG9hc3RcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGNsaWNrZWQodG9hc3QpIHtcclxuICAgICAgICBpZiAodGhpcy5vblRvYXN0Q2xpY2tlZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uVG9hc3RDbGlja2VkKHRvYXN0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGFueVRvYXN0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvYXN0cnMubGVuZ3RoID4gMDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSB0b2FzdElkXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBmaW5kVG9hc3QodG9hc3RJZCkge1xyXG4gICAgICAgIGZvciAobGV0IC8qKiBAdHlwZSB7P30gKi8gdG9hc3Qgb2YgdGhpcy50b2FzdHJzKSB7XHJcbiAgICAgICAgICAgIGlmICh0b2FzdC5pZCA9PT0gdG9hc3RJZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvYXN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IGV2ZW50XHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBvbkFuaW1hdGlvbkVuZChldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC50b1N0YXRlID09PSBcInZvaWRcIiAmJiAhdGhpcy5hbnlUb2FzdCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX25nRXhpdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLl9mcmVzaCAmJiBldmVudC5mcm9tU3RhdGUgPT09IFwidm9pZFwiKSB7XHJcbiAgICAgICAgICAgIC8vIG5vdGlmeSB3aGVuIGZpcnN0IGFuaW1hdGlvbiBpcyBkb25lXHJcbiAgICAgICAgICAgIHRoaXMuX2ZyZXNoID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX3pvbmUucnVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uRW50ZXIubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb25FbnRlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIF9uZ0V4aXQoKSB7XHJcbiAgICAgICAgdGhpcy5fem9uZS5vbk1pY3JvdGFza0VtcHR5LnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uRXhpdC5uZXh0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX29uRXhpdC5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLl9uZ0V4aXQoKTtcclxuICAgIH1cclxufVxyXG5Ub2FzdHJDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcclxuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6IFwiYXBwLXRvYXN0clwiLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGA8ZGl2ICN0b2FzdHJDb250YWluZXIgaWQ9XCJ0b2FzdHItY29udGFpbmVyXCIgY2xhc3M9XCJ7e3Bvc2l0aW9ufX1cIj5cbiAgPGRpdiAqbmdGb3I9XCJsZXQgdG9hc3RyIG9mIHRvYXN0cnNcIiBbQGluT3V0XT1cInRvYXN0ci5jb25maWcuYW5pbWF0ZSB8fCBhbmltYXRlXCIgKEBpbk91dC5kb25lKT1cIm9uQW5pbWF0aW9uRW5kKCRldmVudClcIiBjbGFzcz1cInRvYXN0ciB0b2FzdHIte3t0b2FzdHIudHlwZX19XCIgXG4gIChjbGljayk9XCJjbGlja2VkKHRvYXN0cilcIj5cbiAgICA8ZGl2IGNsYXNzPVwidG9hc3RyLWNsb3NlLWJ1dHRvblwiICpuZ0lmPVwidG9hc3RyLmNvbmZpZy5zaG93Q2xvc2VCdXR0b25cIiAoY2xpY2spPVwicmVtb3ZlVG9hc3RyKHRvYXN0cilcIj4mdGltZXM7XG4gICAgPC9kaXY+IFxuICAgIDxkaXYgKm5nSWY9XCJ0b2FzdHIudGl0bGVcIiBjbGFzcz1cInRvLXRpdGxlIHt7dG9hc3RyLmNvbmZpZy50aXRsZUNsYXNzIHx8IHRpdGxlQ2xhc3N9fVwiPnt7dG9hc3RyLnRpdGxlfX08L2Rpdj5cbiAgICA8ZGl2IFtuZ1N3aXRjaF09XCJ0b2FzdHIuY29uZmlnLmVuYWJsZUhUTUxcIj5cbiAgICAgIDxzcGFuICpuZ1N3aXRjaENhc2U9XCJ0cnVlXCIgY2xhc3M9XCJ0by1tZXNzYWdlIHt7dG9hc3RyLmNvbmZpZy5tZXNzYWdlQ2xhc3MgfHwgbWVzc2FnZUNsYXNzfX1cIiBbaW5uZXJIVE1MXT1cInNhbml0aXplci5ieXBhc3NTZWN1cml0eVRydXN0SHRtbCh0b2FzdHIubWVzc2FnZSlcIj48L3NwYW4+XG4gICAgICA8c3BhbiAqbmdTd2l0Y2hEZWZhdWx0IGNsYXNzPVwidG8tbWVzc2FnZSB7e3RvYXN0ci5jb25maWcubWVzc2FnZUNsYXNzIHx8IG1lc3NhZ2VDbGFzc319XCI+e3t0b2FzdHIubWVzc2FnZX19PC9zcGFuPlxuICAgIDwvZGl2PiAgICAgICAgICAgICBcbiAgPC9kaXY+XG48L2Rpdj5gLFxyXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbYC50by10aXRsZXtmb250LXdlaWdodDo3MDA7Zm9udC1zaXplOjE2cHg7bWFyZ2luLWJvdHRvbTo4cHg7Y29sb3I6I2ZmZn0udG8tbWVzc2FnZXt3b3JkLXdyYXA6YnJlYWstd29yZDtmb250LXNpemU6MTRweDtsaW5lLWhlaWdodDoyMHB4O2Rpc3BsYXk6YmxvY2s7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fS50by1tZXNzYWdlIGEsLnRvLW1lc3NhZ2UgbGFiZWx7Y29sb3I6I2ZmZn0udG8tbWVzc2FnZSBhOmhvdmVye2NvbG9yOiNjY2M7dGV4dC1kZWNvcmF0aW9uOm5vbmV9LnRvYXN0ci1jbG9zZS1idXR0b257cG9zaXRpb246cmVsYXRpdmU7cmlnaHQ6LTVweDt0b3A6LTE1cHg7ZmxvYXQ6cmlnaHQ7Zm9udC1zaXplOjI1cHg7Y29sb3I6I2ZmZjstd2Via2l0LXRleHQtc2hhZG93OjAgMXB4IDAgI2ZmZjt0ZXh0LXNoYWRvdzowIDFweCAwICNmZmY7b3BhY2l0eTouOH0udG9hc3RyLWNsb3NlLWJ1dHRvbjpmb2N1cywudG9hc3RyLWNsb3NlLWJ1dHRvbjpob3Zlcntjb2xvcjojMDAwO3RleHQtZGVjb3JhdGlvbjpub25lO2N1cnNvcjpwb2ludGVyO29wYWNpdHk6LjR9YnV0dG9uLnRvYXN0ci1jbG9zZS1idXR0b257cGFkZGluZzowO2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQ6MCAwO2JvcmRlcjowOy13ZWJraXQtYXBwZWFyYW5jZTpub25lfS50b3AtY2VudGVye3RvcDowO3JpZ2h0OjA7d2lkdGg6MTAwJX0uYm90dG9tLWNlbnRlcntib3R0b206MDtyaWdodDowO3dpZHRoOjEwMCV9LnRvcC1mdWxsLXdpZHRoe3RvcDowO3JpZ2h0OjA7d2lkdGg6MTAwJX0uYm90dG9tLWZ1bGwtd2lkdGh7Ym90dG9tOjA7cmlnaHQ6MDt3aWR0aDoxMDAlfS50b3AtbGVmdHt0b3A6MTJweDtsZWZ0OjEycHh9LnRvcC1yaWdodHt0b3A6MTJweDtyaWdodDoxMnB4fS5ib3R0b20tcmlnaHR7cmlnaHQ6MTJweDtib3R0b206MTJweH0uYm90dG9tLWxlZnR7Ym90dG9tOjEycHg7bGVmdDoxMnB4fSN0b2FzdHItY29udGFpbmVye3Bvc2l0aW9uOmZpeGVkO3otaW5kZXg6OTk5OTl9I3RvYXN0ci1jb250YWluZXIgKntib3gtc2l6aW5nOmJvcmRlci1ib3h9I3RvYXN0ci1jb250YWluZXI+ZGl2e3Bvc2l0aW9uOnJlbGF0aXZlO292ZXJmbG93OmhpZGRlbjttYXJnaW46MTBweCAwIDZweDtwYWRkaW5nOjE1cHggMTVweCAxNXB4IDYwcHg7d2lkdGg6MzQ1cHg7Ym9yZGVyLXJhZGl1czozcHg7YmFja2dyb3VuZC1wb3NpdGlvbjoxNXB4O2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtib3gtc2hhZG93OjAgMCAxMnB4ICM5OTk7Y29sb3I6I2ZmZjtvcGFjaXR5OjF9I3RvYXN0ci1jb250YWluZXI+ZGl2LnRvYXN0ci1jdXN0b217cGFkZGluZzoxNXB4O2NvbG9yOiMwMzAzMDN9I3RvYXN0ci1jb250YWluZXI+ZGl2LnRvYXN0ci1jdXN0b20gLnRvYXN0ci1jbG9zZS1idXR0b257Y29sb3I6Izk5OSFpbXBvcnRhbnR9I3RvYXN0ci1jb250YWluZXI+OmhvdmVye2JveC1zaGFkb3c6MCAwIDEycHggIzAwMDtvcGFjaXR5OjE7Y3Vyc29yOnBvaW50ZXJ9I3RvYXN0ci1jb250YWluZXI+LnRvYXN0ci1pbmZve2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFBWE5TUjBJQXJzNGM2UUFBQUFSblFVMUJBQUN4and2OFlRVUFBQUFKY0VoWmN3QUFEc01BQUE3REFjZHZxR1FBQUFHd1NVUkJWRWhMdFphOVNnTkJFTWM5c1V4eFJjb1VLU3pTV0loWHBGTWhoWVdGaGFCZzR5UFlpV0NYWnhCTEVSc0xSUzNFUWtFZndDS2RqV0pBd1NLQ2dvS0NjdWR2NE81WUxydDdFemdYaGlVMy80K2IyY2ttd1ZqSlNwS2tRNndBaTRnd2hUK3ozd1JCY0V6MHlqU3NlVVRyY1J5ZnNIc1htRDBBbWJIT0M5SWk4VkltbnVYQlBnbEhwUTV3d1NWTTdzTm5URzdaYTRKd0RkQ2p4eUFpSDNueUEybXRhVEp1ZmlEWjVkQ2FxbEl0SUxoMU5IYXRmTjVza3ZqeDlaMzhtNjlDZ3p1WG1aZ1ZyUElHRTc2M0p4OXFLc1JveldZdzZ4T0hkRVIrbm4yS2tPK0JiK1VWNUNCTjZXQzZRdEJnYlJWb3pyYWhBYm1tNkh0VXNndFBDMTl0RmR4WFpZQk9ma2JtRkoxVmFIQTFWQUhqZDBwcDcwb1RaenZSK0VWcngyWWdmZHNxNmV1NTVCSFlSOGhsY2tpK24ra0VSVUZHOEJyQTBCd2plQXYyTThXTFFCdGN5K1NENmZOc21uQjNBbEJMcmdUdFZXMWMyUU40YlZXTEFUYUlTNjBKMkR1NXkxVGlKZ2pTQnZGVlpnVG13Q1UrZEFaRm9QeEdFRXM4bnlIQzlCd2UyR3ZFSnYyV1haYjB2amR5RlQ0Q3hrM2Uva0lxbE9Hb1ZMd3dQZXZwWUhUKzAwVCtoV3dYRGY0QUpBT1VxV2NEaGJ3QUFBQUFTVVZPUks1Q1lJST0pIWltcG9ydGFudH0jdG9hc3RyLWNvbnRhaW5lcj4udG9hc3RyLWVycm9ye2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFBWE5TUjBJQXJzNGM2UUFBQUFSblFVMUJBQUN4and2OFlRVUFBQUFKY0VoWmN3QUFEc01BQUE3REFjZHZxR1FBQUFIT1NVUkJWRWhMclphL1NnTkJFTVp6aDBXS0NDbFNDS2FJWU9FRCtBQUtlUVFMRzhIV3p0TENJbUJyWWFkZ0lkWStnSUtOWWtCRlN3dTdDQW9xQ2dra29HQkkvRTI4UGRiTFptZURMZ3paemN4ODMveloyU1NYQzFqOWZyK0kxSHE5M2cyeXhINGl3TTF2a29CV0FkeENtcHpUeGZrTjJSY3laTmFIRklrU28xMCs4a2d4a1hJVVJWNUhHeFRtRnVjNzVCMlJmUWtweEhHOGFBZ2FBRmEwdEFIcVlGZlE3SXdlMnloT0RrOCtKNEM3eUFvUlRXSTN3LzRrbEdSZ1I0bE83UnBuOStndk15V3ArdXhGaDgrSCtBUmxnTjFuSnVKdVFBWXZOa0Vud0dGY2sxOEVyNHEzZWdFYy9vTyttaExkS2dSeWhkTkZpYWNDMHJsT0NiaE5WejRIOUZuQVlnREJ2VTNRSWlvWmxKRkxKdHNvSFlSRGZpWm9VeUl4cUN0UnBWbEFOcTBFVTRkQXBqcnRnZXpQRmFkNVMxOVdnamtjMGhOVm51RjRIalZBNkM3UXJTSWJ5bEIrb1plM2FIZ0JzcWxOcUtZSDQ4alh5SktNdUFiaXlWSjhLemFCM2VSYzBwZzlWd1E0bmlGcnlJNjhxaU9pM0Fiandkc2ZuQXRrMGJDalRMSktyNm1yRDlnOGlxL1MvQjgxaGd1T01sUVRuVnlHNDB3QWNqbm1nc0NORVNEcmptZTd3ZmZ0UDRQN1NQNE4zQ0paZHZ6b055R3EyYy9IV09YSkdzdlZnK1JBL2syTUMvd042STJZQTJQdDhHa0FBQUFBU1VWT1JLNUNZSUk9KSFpbXBvcnRhbnR9I3RvYXN0ci1jb250YWluZXI+LnRvYXN0ci1zdWNjZXNze2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFBWE5TUjBJQXJzNGM2UUFBQUFSblFVMUJBQUN4and2OFlRVUFBQUFKY0VoWmN3QUFEc01BQUE3REFjZHZxR1FBQUFEc1NVUkJWRWhMWTJBWUJmUU1nZi8vLzNQOCsvZXZBSWd2QS9Gc0lGK0JhdllERFdNQkdyb2FTTU1CaUU4VkM3QVpEcklGYU1GbmlpM0FaVGpVZ3NVVVdVREE4T2RBSDZpUWJRRWh3NEh5R3NQRWNLQlhCSUM0QVJoZXg0RzRCc2ptd2VVMXNvSUZhR2cvV3RvRlpSSVpkRXZJTWh4a0NDalhJVnNBVFY2Z0ZHQUNzNFJzdzBFR2dJSUgzUUpZSmdIU0FSUVpEcldBQitqYXd6Z3MrUTJVTzQ5RDdqblJTUkdvRUZSSUxjZG1FTVdHSTBjbTBKSjJRcFlBMVJEdmNtekpFV2hBQmhEL3BxckwwUzBDV3VBQktnblJraTlsTHNlUzdnMkFscXdIV1FTS0g0b0tMcklMcFJHaEVRQ3cyTGlSVUlhNGx3QUFBQUJKUlU1RXJrSmdnZz09KSFpbXBvcnRhbnR9I3RvYXN0ci1jb250YWluZXI+LnRvYXN0ci13YXJuaW5ne2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFBWE5TUjBJQXJzNGM2UUFBQUFSblFVMUJBQUN4and2OFlRVUFBQUFKY0VoWmN3QUFEc01BQUE3REFjZHZxR1FBQUFHWVNVUkJWRWhMNVpTdlRzTlFGTWJYWkdJQ01ZR1ltSmhBUUlKQUlDWVFQQUFDaVNEQjhBaUlDUVFKVDRDcVFFd2dKdllBU0FRQ2laaVltSmhBSUJBVENBUkp5KzlyVHNsZGQ4c0t1MU0wK2RMYjA1N3Y2L2xicS8yckswbVMvVFJOajljV05BS1BZSUpJSTdnSXhDY1E1MWN2cUlEK0dJRVg4QVNHNEIxYks1Z0laRmVRZm9KZEVYT2ZnWDRRQVFnN2tIMkE2NXlRODdseXhiMjdzZ2drQXpBdUZoYmJnMUsya2dDa0IxYlZ3eUlSOW0yTDdQUlBJaERVSVhnR3R5S3c1NzV5ejNsVE5zNlg0SlhualYrTEtNL20zTXlkblRidE9LSWp0ejZWaENCcTR2U20zbmNkckQybGswVmdVWFNWS2pWREpYSnppalcxUlFkc1U3Rjc3SGU4dTY4a29OWlR6OE96NXlHYTZKM0gzbFoweFlnWEJLMlF5bWxXV0ErUlduWWhza0xCdjJ2bUUraEJNQ3RiQTdLWDVkcld5UlQvMkpzcVoySXZmQjlZNGJXRE5NRmJKUkZtQzlFNzRTb1MwQ3F1bHdqa0MwKzVicGNWMUNaOE5NZWo0cGp5MFUrZG9EUXNHeW8xaHpWSnR0SWpoUTdHbkJ0UkZOMVVhclVsSDhGM3hpY3QrSFkwN3JFem9VR1BsV2NqUkZScjQvZ0NoWmdjM1pMMmQ4b0FBQUFBU1VWT1JLNUNZSUk9KSFpbXBvcnRhbnR9I3RvYXN0ci1jb250YWluZXIuYm90dG9tLWNlbnRlcj5kaXYsI3RvYXN0ci1jb250YWluZXIudG9wLWNlbnRlcj5kaXZ7d2lkdGg6MzAwcHg7bWFyZ2luOjEwcHggYXV0b30jdG9hc3RyLWNvbnRhaW5lci5ib3R0b20tZnVsbC13aWR0aD5kaXYsI3RvYXN0ci1jb250YWluZXIudG9wLWZ1bGwtd2lkdGg+ZGl2e3dpZHRoOjk2JTttYXJnaW46MTBweCBhdXRvfS50b2FzdHJ7YmFja2dyb3VuZC1jb2xvcjojZmZmfS50b2FzdHItc3VjY2Vzc3tiYWNrZ3JvdW5kLWNvbG9yOiM1MWEzNTF9LnRvYXN0ci1lcnJvcntiYWNrZ3JvdW5kLWNvbG9yOiNkOTUzNGZ9LnRvYXN0ci1pbmZve2JhY2tncm91bmQtY29sb3I6Izc0NjBlZX0udG9hc3RyLXdhcm5pbmd7YmFja2dyb3VuZC1jb2xvcjojZjg5NDA2fS50b2FzdHItcHJvZ3Jlc3N7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO2JvdHRvbTowO2hlaWdodDo0cHg7YmFja2dyb3VuZC1jb2xvcjojMDAwO29wYWNpdHk6LjR9QG1lZGlhIGFsbCBhbmQgKG1heC13aWR0aDoyNDBweCl7I3RvYXN0ci1jb250YWluZXI+ZGl2e3BhZGRpbmc6OHB4IDhweCA4cHggNTBweDt3aWR0aDoxMWVtfSN0b2FzdHItY29udGFpbmVyIC50b2FzdHItY2xvc2UtYnV0dG9ue3JpZ2h0Oi0uMmVtO3RvcDotLjJlbX19QG1lZGlhIGFsbCBhbmQgKG1pbi13aWR0aDoyNDFweCkgYW5kIChtYXgtd2lkdGg6NDgwcHgpeyN0b2FzdHItY29udGFpbmVyPmRpdntwYWRkaW5nOjhweCA4cHggOHB4IDUwcHg7d2lkdGg6MThlbX0jdG9hc3RyLWNvbnRhaW5lciAudG9hc3RyLWNsb3NlLWJ1dHRvbntyaWdodDotLjJlbTt0b3A6LS4yZW19fUBtZWRpYSBhbGwgYW5kIChtaW4td2lkdGg6NDgxcHgpIGFuZCAobWF4LXdpZHRoOjc2OHB4KXsjdG9hc3RyLWNvbnRhaW5lcj5kaXZ7cGFkZGluZzoxNXB4IDE1cHggMTVweCA1MHB4O3dpZHRoOjI1ZW19fWBdLFxyXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uczogW1RvYXN0ckFuaW1hdGlvbnNdXHJcbiAgICAgICAgICAgIH0sXSB9LFxyXG5dO1xyXG4vKiogQG5vY29sbGFwc2UgKi9cclxuVG9hc3RyQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xyXG4gICAgeyB0eXBlOiBEb21TYW5pdGl6ZXIgfSxcclxuICAgIHsgdHlwZTogQ2hhbmdlRGV0ZWN0b3JSZWYgfSxcclxuICAgIHsgdHlwZTogTmdab25lIH0sXHJcbiAgICB7IHR5cGU6IFRvYXN0ck9wdGlvbnMgfVxyXG5dO1xuXG4vKipcclxuICogQGZpbGVvdmVydmlldyBhZGRlZCBieSB0c2lja2xlXHJcbiAqIEBzdXBwcmVzcyB7Y2hlY2tUeXBlc30gY2hlY2tlZCBieSB0c2NcclxuICovXHJcbmNsYXNzIFRvYXN0ck1hbmFnZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IF9hcHBsaWNhdGlvblJlZlxyXG4gICAgICogQHBhcmFtIHs/fSBfY29tcG9uZW50RmFjdG9yeVJlc29sdmVyXHJcbiAgICAgKiBAcGFyYW0gez99IF9pbmplY3RvclxyXG4gICAgICogQHBhcmFtIHs/fSBuZ1pvbmVcclxuICAgICAqIEBwYXJhbSB7P30gb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihfYXBwbGljYXRpb25SZWYsIF9jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIF9pbmplY3Rvciwgbmdab25lLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5fYXBwbGljYXRpb25SZWYgPSBfYXBwbGljYXRpb25SZWY7XHJcbiAgICAgICAgdGhpcy5fY29tcG9uZW50RmFjdG9yeVJlc29sdmVyID0gX2NvbXBvbmVudEZhY3RvcnlSZXNvbHZlcjtcclxuICAgICAgICB0aGlzLl9pbmplY3RvciA9IF9pbmplY3RvcjtcclxuICAgICAgICB0aGlzLm5nWm9uZSA9IG5nWm9uZTtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIHRoaXMudG9hc3RyQ29udGFpbmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMudG9hc3RDbGlja2VkID0gbmV3IFN1YmplY3QoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHRlbXBsYXRlIFRcclxuICAgICAqIEBwYXJhbSB7P30gdHlwZVxyXG4gICAgICogQHBhcmFtIHs/PX0gcHJvdmlkZXJzXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBjcmVhdGVUb2FzdHJDb21wb25lbnQodHlwZSwgcHJvdmlkZXJzID0gW10pIHtcclxuICAgICAgICAvLyBSZXNvbHZlIGEgZmFjdG9yeSBmb3IgY3JlYXRpbmcgY29tcG9uZW50cyBvZiB0eXBlIGB0eXBlYC5cclxuICAgICAgICBjb25zdCAvKiogQHR5cGUgez99ICovIGZhY3RvcnkgPSB0aGlzLl9jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoLyoqIEB0eXBlIHs/fSAqLyAodHlwZSkpO1xyXG4gICAgICAgIC8vIFJlc29sdmUgYW5kIGNyZWF0ZSBhbiBpbmplY3RvciB3aXRoIHRoZSBzcGVjaWZpZWQgcHJvdmlkZXJzLlxyXG4gICAgICAgIGNvbnN0IC8qKiBAdHlwZSB7P30gKi8gX3Byb3ZpZGVycyA9IFJlZmxlY3RpdmVJbmplY3Rvci5yZXNvbHZlKHByb3ZpZGVycyk7XHJcbiAgICAgICAgY29uc3QgLyoqIEB0eXBlIHs/fSAqLyBpbmplY3RvciA9IFJlZmxlY3RpdmVJbmplY3Rvci5mcm9tUmVzb2x2ZWRQcm92aWRlcnMoX3Byb3ZpZGVycywgdGhpcy5faW5qZWN0b3IpO1xyXG4gICAgICAgIC8vIENyZWF0ZSBuZXcgbm9kZSBmb3IgaW5zZXJ0aW5nIGludG8gZG9jdW1lbnQuXHJcbiAgICAgICAgbGV0IC8qKiBAdHlwZSB7P30gKi8gbmV3Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbmV3Tm9kZS5pZCA9IFwidG9hc3RyLW5vZGUtXCIgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyMDApO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLmFwcGVuZENoaWxkKG5ld05vZGUpO1xyXG4gICAgICAgIC8vIENyZWF0ZSBhIGNvbXBvbmVudCB1c2luZyB0aGUgcHJldmlvdXNseSByZXNvbHZlZCBmYWN0b3J5ICYgaW5qZWN0b3IuXHJcbiAgICAgICAgY29uc3QgLyoqIEB0eXBlIHs/fSAqLyBjb21wb25lbnRSZWYgPSBmYWN0b3J5LmNyZWF0ZShpbmplY3RvciwgW10sIG5ld05vZGUpO1xyXG4gICAgICAgIC8vIEluc2VydCBuZXcgY29tcG9uZW50IG5vZGUgaW50byBkb2N1bWVudCBib2R5LlxyXG4gICAgICAgIHRoaXMuYXR0YWNoVG9BcHBsaWNhdGlvbihjb21wb25lbnRSZWYpO1xyXG4gICAgICAgIHJldHVybiBjb21wb25lbnRSZWY7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEB0ZW1wbGF0ZSBUXHJcbiAgICAgKiBAcGFyYW0gez99IGNvbXBvbmVudFJlZlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgYXR0YWNoVG9BcHBsaWNhdGlvbihjb21wb25lbnRSZWYpIHtcclxuICAgICAgICB0aGlzLl9hcHBsaWNhdGlvblJlZi5hdHRhY2hWaWV3KGNvbXBvbmVudFJlZi5ob3N0Vmlldyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEB0ZW1wbGF0ZSBUXHJcbiAgICAgKiBAcGFyYW0gez99IGNvbXBvbmVudFJlZlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgZGV0YWNoRnJvbUFwcGxpY2F0aW9uKGNvbXBvbmVudFJlZikge1xyXG4gICAgICAgIHRoaXMuX2FwcGxpY2F0aW9uUmVmLmRldGFjaFZpZXcoY29tcG9uZW50UmVmLmhvc3RWaWV3KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBwb3NpdGlvblxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgaXNUb2FzdHJDb250YWluZXJFeGlzdChwb3NpdGlvbikge1xyXG4gICAgICAgIGlmICh0aGlzLnRvYXN0ckNvbnRhaW5lcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCAvKiogQHR5cGUgez99ICovIGkgPSB0aGlzLnRvYXN0ckNvbnRhaW5lcnMuZmluZEluZGV4KHggPT4geC5wb3NpdGlvbiA9PT0gcG9zaXRpb24pO1xyXG4gICAgICAgICAgICBpZiAoaSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gcG9zaXRpb25cclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGdldFRvYXN0ckNvbXBvbmVudFJlZihwb3NpdGlvbikge1xyXG4gICAgICAgIGlmICh0aGlzLnRvYXN0ckNvbnRhaW5lcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCAvKiogQHR5cGUgez99ICovIGNvbnRhaW5lciA9IHRoaXMudG9hc3RyQ29udGFpbmVycy5maW5kKHggPT4geC5wb3NpdGlvbiA9PT0gcG9zaXRpb24pO1xyXG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyID8gY29udGFpbmVyLnJlZiA6IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IHRvYXN0XHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBjcmVhdGVUaW1lb3V0KHRvYXN0KSB7XHJcbiAgICAgICAgbGV0IC8qKiBAdHlwZSB7P30gKi8gdGFzaztcclxuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRhc2sgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLmNsZWFyVG9hc3QodG9hc3QpKSwgdG9hc3QuY29uZmlnLnRvYXN0VGltZW91dCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRhc2sudG9TdHJpbmcoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSB0b2FzdFxyXG4gICAgICogQHBhcmFtIHs/PX0gb3B0aW9uc1xyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgc2V0dXBUb2FzdCh0b2FzdCwgb3B0aW9ucykge1xyXG4gICAgICAgIHRvYXN0LmlkID0gKyt0aGlzLmluZGV4O1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaGFzT3duUHJvcGVydHkoXCJ0b2FzdFRpbWVvdXRcIikpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5kaXNtaXNzID0gXCJhdXRvXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IC8qKiBAdHlwZSB7P30gKi8gY3VzdG9tQ29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KTtcclxuICAgICAgICBPYmplY3Qua2V5cyh0b2FzdC5jb25maWcpLmZvckVhY2goayA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjdXN0b21Db25maWcuaGFzT3duUHJvcGVydHkoaykpIHtcclxuICAgICAgICAgICAgICAgIHRvYXN0LmNvbmZpZ1trXSA9IGN1c3RvbUNvbmZpZ1trXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0b2FzdC5jb25maWcuZGlzbWlzcyA9PT0gXCJhdXRvXCIpIHtcclxuICAgICAgICAgICAgdG9hc3QudGltZW91dElkID0gdGhpcy5jcmVhdGVUaW1lb3V0KHRvYXN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdG9hc3QudG9hc3RyTWFuYWdlciA9IHRoaXM7IC8vIGJpbmQgVG9hc3RyTWFuYWdlciBpbnN0YW5jZSB0byBUb2FzdHJcclxuICAgICAgICBjb25zdCAvKiogQHR5cGUgez99ICovIHBvc2l0aW9uID0gdG9hc3QuY29uZmlnLnBvc2l0aW9uO1xyXG4gICAgICAgIGlmICh0aGlzLmlzVG9hc3RyQ29udGFpbmVyRXhpc3QocG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0VG9hc3RyQ29tcG9uZW50UmVmKHBvc2l0aW9uKS5pbnN0YW5jZS5hZGRUb2FzdHIodG9hc3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdG9hc3Q7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gdG9hc3RcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGNsZWFyVG9hc3QodG9hc3QpIHtcclxuICAgICAgICBjb25zdCAvKiogQHR5cGUgez99ICovIHBvc2l0aW9uID0gdG9hc3QuY29uZmlnLnBvc2l0aW9uO1xyXG4gICAgICAgIGlmICh0aGlzLmlzVG9hc3RyQ29udGFpbmVyRXhpc3QocG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgIGxldCAvKiogQHR5cGUgez99ICovIGluc3RhbmNlID0gdGhpcy5nZXRUb2FzdHJDb21wb25lbnRSZWYocG9zaXRpb24pLmluc3RhbmNlO1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5yZW1vdmVUb2FzdHIodG9hc3QpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgY2xlYXJBbGxUb2FzdHMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudG9hc3RyQ29udGFpbmVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9hc3RyQ29udGFpbmVycy5mb3JFYWNoKGNvbXBvbmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjb21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgLyoqIEB0eXBlIHs/fSAqLyByZWYgPSBjb21wb25lbnQucmVmO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgLyoqIEB0eXBlIHs/fSAqLyBpbnN0YW5jZSA9IGNvbXBvbmVudC5yZWYuaW5zdGFuY2U7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5yZW1vdmVBbGxUb2FzdHMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZShyZWYpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gdG9hc3RyQ29tcG9uZW50UmVmXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBkaXNwb3NlKHRvYXN0ckNvbXBvbmVudFJlZikge1xyXG4gICAgICAgIGlmICh0b2FzdHJDb21wb25lbnRSZWYpIHtcclxuICAgICAgICAgICAgY29uc3QgLyoqIEB0eXBlIHs/fSAqLyBpID0gdGhpcy50b2FzdHJDb250YWluZXJzLmZpbmRJbmRleCh4ID0+IHgucG9zaXRpb24gPT09IHRvYXN0ckNvbXBvbmVudFJlZi5pbnN0YW5jZS5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9hc3RyQ29udGFpbmVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kZXRhY2hGcm9tQXBwbGljYXRpb24odG9hc3RyQ29tcG9uZW50UmVmKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gdG9hc3RcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIF9vblRvYXN0Q2xpY2tlZCh0b2FzdCkge1xyXG4gICAgICAgIHRoaXMudG9hc3RDbGlja2VkLm5leHQodG9hc3QpO1xyXG4gICAgICAgIGlmICh0b2FzdC5jb25maWcuZGlzbWlzcyAhPT0gXCJjb250cm9sbGVkXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhclRvYXN0KHRvYXN0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gdG9hc3RcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGRpc21pc3NUb2FzdHIodG9hc3QpIHtcclxuICAgICAgICB0aGlzLmNsZWFyVG9hc3QodG9hc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBkaXNtaXNzQWxsVG9hc3RyKCkge1xyXG4gICAgICAgIHRoaXMuY2xlYXJBbGxUb2FzdHMoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgb25DbGlja1RvYXN0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvYXN0Q2xpY2tlZC5hc09ic2VydmFibGUoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSB0b2FzdHJcclxuICAgICAqIEBwYXJhbSB7Pz19IG9wdGlvbnNcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIHNob3dUb2FzdHIodG9hc3RyLCBvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgLyoqIEB0eXBlIHs/fSAqLyBvcHQgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1RvYXN0ckNvbnRhaW5lckV4aXN0KG9wdC5wb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IC8qKiBAdHlwZSB7P30gKi8gcHJvdmlkZXJzID0gW3sgcHJvdmlkZTogVG9hc3RyT3B0aW9ucywgdXNlVmFsdWU6IG9wdCB9XTtcclxuICAgICAgICAgICAgICAgIGxldCAvKiogQHR5cGUgez99ICovIHRvYXN0ckNvbXBvbmVudFJlZiA9IHRoaXMuY3JlYXRlVG9hc3RyQ29tcG9uZW50KFRvYXN0ckNvbXBvbmVudCwgcHJvdmlkZXJzKTtcclxuICAgICAgICAgICAgICAgIHRvYXN0ckNvbXBvbmVudFJlZi5pbnN0YW5jZS5vblRvYXN0Q2xpY2tlZCA9ICh0b2FzdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uVG9hc3RDbGlja2VkKHRvYXN0KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0b2FzdHJDb21wb25lbnRSZWYuaW5zdGFuY2Uub25FeGl0KCkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UodG9hc3RyQ29tcG9uZW50UmVmKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2FzdHJDb250YWluZXJzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBvcHQucG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgcmVmOiB0b2FzdHJDb21wb25lbnRSZWZcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5zZXR1cFRvYXN0KHRvYXN0ciwgb3B0aW9ucykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7Pz19IHRpdGxlXHJcbiAgICAgKiBAcGFyYW0gez89fSBvcHRpb25zXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBlcnJvclRvYXN0cihtZXNzYWdlLCB0aXRsZSwgb3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IC8qKiBAdHlwZSB7P30gKi8gZGF0YSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5kYXRhID8gb3B0aW9ucy5kYXRhIDogbnVsbDtcclxuICAgICAgICBjb25zdCAvKiogQHR5cGUgez99ICovIHRvYXN0ID0gbmV3IFRvYXN0cihcImVycm9yXCIsIG1lc3NhZ2UsIHRpdGxlLCBkYXRhKTtcclxuICAgICAgICB0aGlzLnNob3dUb2FzdHIodG9hc3QsIG9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiB0b2FzdDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0gez89fSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHs/PX0gb3B0aW9uc1xyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgaW5mb1RvYXN0cihtZXNzYWdlLCB0aXRsZSwgb3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IC8qKiBAdHlwZSB7P30gKi8gZGF0YSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5kYXRhID8gb3B0aW9ucy5kYXRhIDogbnVsbDtcclxuICAgICAgICBjb25zdCAvKiogQHR5cGUgez99ICovIHRvYXN0ID0gbmV3IFRvYXN0cihcImluZm9cIiwgbWVzc2FnZSwgdGl0bGUsIGRhdGEpO1xyXG4gICAgICAgIHRoaXMuc2hvd1RvYXN0cih0b2FzdCwgb3B0aW9ucyk7XHJcbiAgICAgICAgcmV0dXJuIHRvYXN0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gez99IG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7Pz19IHRpdGxlXHJcbiAgICAgKiBAcGFyYW0gez89fSBvcHRpb25zXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBzdWNjZXNzVG9hc3RyKG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgLyoqIEB0eXBlIHs/fSAqLyBkYXRhID0gb3B0aW9ucyAmJiBvcHRpb25zLmRhdGEgPyBvcHRpb25zLmRhdGEgOiBudWxsO1xyXG4gICAgICAgIGNvbnN0IC8qKiBAdHlwZSB7P30gKi8gdG9hc3QgPSBuZXcgVG9hc3RyKFwic3VjY2Vzc1wiLCBtZXNzYWdlLCB0aXRsZSwgZGF0YSk7XHJcbiAgICAgICAgdGhpcy5zaG93VG9hc3RyKHRvYXN0LCBvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gdG9hc3Q7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gbWVzc2FnZVxyXG4gICAgICogQHBhcmFtIHs/PX0gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7Pz19IG9wdGlvbnNcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIHdhcm5pbmdUb2FzdHIobWVzc2FnZSwgdGl0bGUsIG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCAvKiogQHR5cGUgez99ICovIGRhdGEgPSBvcHRpb25zICYmIG9wdGlvbnMuZGF0YSA/IG9wdGlvbnMuZGF0YSA6IG51bGw7XHJcbiAgICAgICAgY29uc3QgLyoqIEB0eXBlIHs/fSAqLyB0b2FzdCA9IG5ldyBUb2FzdHIoXCJ3YXJuaW5nXCIsIG1lc3NhZ2UsIHRpdGxlLCBkYXRhKTtcclxuICAgICAgICB0aGlzLnNob3dUb2FzdHIodG9hc3QsIG9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiB0b2FzdDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0gez89fSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHs/PX0gb3B0aW9uc1xyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgY3VzdG9tVG9hc3RyKG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgLyoqIEB0eXBlIHs/fSAqLyBkYXRhID0gb3B0aW9ucyAmJiBvcHRpb25zLmRhdGEgPyBvcHRpb25zLmRhdGEgOiBudWxsO1xyXG4gICAgICAgIGNvbnN0IC8qKiBAdHlwZSB7P30gKi8gdG9hc3QgPSBuZXcgVG9hc3RyKFwiY3VzdG9tXCIsIG1lc3NhZ2UsIHRpdGxlLCBkYXRhKTtcclxuICAgICAgICB0aGlzLnNob3dUb2FzdHIodG9hc3QsIG9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiB0b2FzdDtcclxuICAgIH1cclxufVxyXG5Ub2FzdHJNYW5hZ2VyLmRlY29yYXRvcnMgPSBbXHJcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfSxcclxuXTtcclxuLyoqIEBub2NvbGxhcHNlICovXHJcblRvYXN0ck1hbmFnZXIuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXHJcbiAgICB7IHR5cGU6IEFwcGxpY2F0aW9uUmVmIH0sXHJcbiAgICB7IHR5cGU6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciB9LFxyXG4gICAgeyB0eXBlOiBJbmplY3RvciB9LFxyXG4gICAgeyB0eXBlOiBOZ1pvbmUgfSxcclxuICAgIHsgdHlwZTogVG9hc3RyT3B0aW9ucyB9XHJcbl07XG5cbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcclxuICogQHN1cHByZXNzIHtjaGVja1R5cGVzfSBjaGVja2VkIGJ5IHRzY1xyXG4gKi9cclxuY2xhc3MgVG9hc3RyTW9kdWxlIHtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZvclJvb3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmdNb2R1bGU6IFRvYXN0ck1vZHVsZSxcclxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbVG9hc3RyTWFuYWdlciwgVG9hc3RyT3B0aW9uc11cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcblRvYXN0ck1vZHVsZS5kZWNvcmF0b3JzID0gW1xyXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcclxuICAgICAgICAgICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGVdLFxyXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbVG9hc3RyQ29tcG9uZW50XSxcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29tcG9uZW50czogW1RvYXN0ckNvbXBvbmVudF1cclxuICAgICAgICAgICAgfSxdIH0sXHJcbl07XG5cbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcclxuICogQHN1cHByZXNzIHtjaGVja1R5cGVzfSBjaGVja2VkIGJ5IHRzY1xyXG4gKi9cblxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgYWRkZWQgYnkgdHNpY2tsZVxyXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXN9IGNoZWNrZWQgYnkgdHNjXHJcbiAqL1xuXG5leHBvcnQgeyBUb2FzdHJNb2R1bGUsIFRvYXN0ck1hbmFnZXIsIFRvYXN0ciwgVG9hc3RyQW5pbWF0aW9ucyBhcyDJtWIsIFRvYXN0ckNvbXBvbmVudCBhcyDJtWEsIFRvYXN0ck9wdGlvbnMgYXMgybVjIH07XG4iXX0=